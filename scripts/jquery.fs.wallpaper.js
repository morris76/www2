(function(e,t){"use strict";function g(t){var i=e.extend({},v,t);r=e("body");h=D();p=h!==false;if(!p){h="transitionend.wallpaper"}var s=e(this);for(var o=0,u=s.length;o<u;o++){y.apply(s.eq(o),[e.extend({},i)])}if(!r.hasClass("wallpaper-inititalized")){r.addClass("wallpaper-inititalized");n.on("resize.wallpaper",i,C)}return s}function y(t){var n=e(this);if(!n.hasClass("wallpaper")){e.extend(t,n.data("wallpaper-options"));n.addClass("wallpaper").append('<div class="wallpaper-container"></div>');t.guid="wallpaper-"+o++;t.youTubeGuid=0;t.$target=n;t.$container=t.$target.find(".wallpaper-container");t.$target.data("wallpaper",t).on("resize.wallpaper",t,N);var r=t.source;t.source=null;b(r,t,true);t.onReady.call()}}function b(e,n,r){if(e!==n.source){n.source=e;n.isYouTube=false;if(typeof e==="object"&&typeof e.video==="string"){var i=e.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);if(i&&i.length>=1){n.isYouTube=true;n.videoId=i[1]}}if(n.isYouTube){n.playing=false;n.playerReady=false;n.posterLoaded=false;S(e,n,r)}else if(typeof e==="object"&&!e.hasOwnProperty("fallback")){E(e,n,r)}else{if(n.responsiveSource){for(var s in n.responsiveSource){if(n.responsiveSource.hasOwnProperty(s)){n.responsiveSource[s].mq.removeListener(k)}}}n.responsive=false;n.responsiveSource=null;if(typeof e==="object"){var o=[],u;for(var a in e){if(e.hasOwnProperty(a)){var f=a==="fallback"?"(min-width: 0px)":a;if(f){var l=t.matchMedia(f.replace(Infinity,"100000px"));l.addListener(k);o.push({mq:l,source:e[a]});if(l.matches){u=e[a]}}}}n.responsive=true;n.responsiveSource=o;e=u}w(e,n,false,r)}}else{n.$target.trigger("wallpaper.loaded");n.onLoad.call(n.$target)}}function w(t,n,r,o){var u=e('<div class="wallpaper-media wallpaper-image'+(o!==true?" animated":"")+'"><img /></div>'),a=u.find("img"),f=t;a.one("load.wallpaper",function(){if(s){u.addClass("native").css({backgroundImage:"url('"+f+"')"})}u.on(h,function(t){_(t);if(e(t.target).is(u)){u.off(h);if(!r){x(n)}}});setTimeout(function(){u.css({opacity:1});if(n.responsive&&o){x(n)}},0);N({data:n});if(!r||o){n.$target.trigger("wallpaper.loaded");n.onLoad.call(n.$target)}i=e(".wallpaper-responsive")}).attr("src",f);if(n.responsive){u.addClass("wallpaper-responsive")}n.$container.append(u);if(a[0].complete||a[0].readyState===4){a.trigger("load.wallpaper")}}function E(t,n,r){if(n.source.poster){w(n.source.poster,n,true,true);r=false}if(!l){var i='<div class="wallpaper-media wallpaper-video'+(r!==true?" animated":"")+'">';i+="<video";if(n.loop){i+=" loop"}if(n.mute){i+=" muted"}i+=">";if(n.source.webm){i+='<source src="'+n.source.webm+'" type="video/webm" />'}if(n.source.mp4){i+='<source src="'+n.source.mp4+'" type="video/mp4" />'}if(n.source.ogg){i+='<source src="'+n.source.ogg+'" type="video/ogg" />'}i+="</video>";i+="</div>";var s=e(i),o=s.find("video");o.one("loadedmetadata.wallpaper",function(t){s.on(h,function(t){_(t);if(e(t.target).is(s)){s.off(h);x(n)}});setTimeout(function(){s.css({opacity:1})},0);N({data:n});n.$target.trigger("wallpaper.loaded");n.onLoad.call(n.$target);if(n.hoverPlay){n.$target.on("mouseover.boxer",m.play).on("mouseout.boxer",m.pause)}else if(n.autoPlay){this.play()}});n.$container.append(s)}}function S(n,r,i){if(!r.videoId){var s=n.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);r.videoId=s[1]}if(!r.posterLoaded){if(!r.source.poster){r.source.poster="http://img.youtube.com/vi/"+r.videoId+"/0.jpg"}r.posterLoaded=true;w(r.source.poster,r,true,i);i=false}if(!l){if(!e("script[src*='youtube.com/iframe_api']").length){e("head").append('<script src="//www.youtube.com/iframe_api"></script>')}if(!u){a.push({source:n,data:r})}else{var o=r.guid+"_"+r.youTubeGuid++,f="";f+='<div class="wallpaper-media wallpaper-embed'+(i!==true?" animated":"")+'">';f+='<div id="'+o+'"></div>';f+="</div>";var c=e(f);r.$container.append(c);if(r.player){r.oldPlayer=r.player;r.player=null}r.player=new t.YT.Player(o,{videoId:r.videoId,playerVars:{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:o,loop:r.loop?1:0,autoplay:1,origin:t.location.protocol+"//"+t.location.host},events:{onReady:function(e){r.playerReady=true;if(r.mute){r.player.mute()}if(r.hoverPlay){r.$target.on("mouseover.boxer",m.play).on("mouseout.boxer",m.pause)}else if(r.autoPlay){r.player.playVideo()}},onStateChange:function(n){if(!r.playing&&n.data===t.YT.PlayerState.PLAYING){r.playing=true;if(r.hoverPlay||!r.autoPlay){r.player.pauseVideo()}r.$target.trigger("wallpaper.loaded");r.onLoad.call(r.$target);c.on(h,function(t){_(t);if(e(t.target).is(c)){c.off(h);x(r)}});c.css({opacity:1})}else if(r.loop&&r.playing&&n.data===t.YT.PlayerState.ENDED){r.player.playVideo()}r.$target.find(".wallpaper-embed").addClass("ready")},onPlaybackQualityChange:function(e){},onPlaybackRateChange:function(e){},onError:function(e){},onApiChange:function(e){}}});N({data:r})}}}function x(t){var n=t.$container.find(".wallpaper-media");if(n.length>=1){n.not(":last").remove();t.oldPlayer=null}i=e(".wallpaper-responsive")}function T(t){var n=t.$container.find(".wallpaper-media");if(n.length>=1){n.on(h,function(r){_(r);if(e(r.target).is(n)){e(this).remove();delete t.source}}).css({opacity:0})}}function N(e){_(e);var t=e.data;var n=t.$container.find(".wallpaper-media");for(var r=0,i=n.length;r<i;r++){var s=n.eq(r),o=t.isYouTube?"iframe":s.find("video").length?"video":"img",u=s.find(o);if(u.length&&!(o==="img"&&t.nativeSupport)){var a=t.$target.outerWidth(),f=t.$target.outerHeight(),l=a/f,c=M(t,u);t.width=c.naturalWidth;t.height=c.naturalHeight;t.left=0;t.top=0;var h=t.isYouTube?t.embedRatio:t.width/t.height;t.height=f;t.width=t.height*h;if(t.width<a){t.width=a;t.height=t.width/h}t.left=-(t.width-a)/2;t.top=-(t.height-f)/2;s.css({height:t.height,width:t.width,left:t.left,top:t.top})}}}function C(){e(".wallpaper").each(function(){var t=e(this).data("wallpaper");N({data:t})})}function k(){d=A(d,5,L)}function L(){O(d);i.each(function(){var t=e(this),n=t.find("img"),r=t.parents(".wallpaper").data("wallpaper"),i=r.responsiveSource,s=0;for(var o=0,u=i.length;o<u;o++){if(i.hasOwnProperty(o)){var a=i[o].mq;if(a&&a.matches){s=o}}}w(i[s].source,r,false,true);t.trigger("change.wallpaper")})}function A(e,t,n,r){O(e,r);return setTimeout(n,t)}function O(e){if(e!==null){clearInterval(e);e=null}}function M(e,t){if(e.isYouTube){return{naturalHeight:500,naturalWidth:500/e.embedRatio}}else if(t.is("img")){var n=t[0];if(typeof n.naturalHeight!=="undefined"){return{naturalHeight:n.naturalHeight,naturalWidth:n.naturalWidth}}else{var r=new Image;r.src=n.src;return{naturalHeight:r.height,naturalWidth:r.width}}}else{return{naturalHeight:t[0].videoHeight,naturalWidth:t[0].videoWidth}}return false}function _(e){if(e.preventDefault){e.stopPropagation();e.preventDefault()}}function D(){var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},t=document.createElement("div");for(var n in e){if(e.hasOwnProperty(n)&&n in t.style){return e[n]+".wallpaper"}}return false}var n=e(t),r,i=null,s="backgroundSize"in document.documentElement.style,o=0,u=false,a=[],f=t.navigator.userAgent||t.navigator.vendor||t.opera,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(f),c=f.toLowerCase().indexOf("safari")>=0&&f.toLowerCase().indexOf("chrome")<0,h,p,d;var v={autoPlay:true,embedRatio:1.777777,hoverPlay:false,loop:true,mute:true,onLoad:e.noop,onReady:e.noop,source:null};var m={defaults:function(t){v=e.extend(v,t||{});return e(this)},destroy:function(){var t=e(this).each(function(){var t=e(this).data("wallpaper");if(t){t.$container.remove();t.$target.removeClass("wallpaper").off(".boxer").data("wallpaper",null)}});if(typeof r!=="undefined"&&typeof n!=="undefined"&&e(".wallpaper").length<1){r.removeClass("wallpaper-inititalized");n.off(".wallpaper")}return t},load:function(t){return e(this).each(function(){var n=e(this).data("wallpaper");if(n){b(t,n)}})},pause:function(){return e(this).each(function(){var t=e(this).data("wallpaper");if(t){if(t.isYouTube&&t.playerReady){t.player.pauseVideo()}else{var n=t.$container.find("video");if(n.length){n[0].pause()}}}})},play:function(){return e(this).each(function(){var t=e(this).data("wallpaper");if(t){if(t.isYouTube&&t.playerReady){t.player.playVideo()}else{var n=t.$container.find("video");if(n.length){n[0].play()}}}})},stop:function(){m.pause.apply(this)},unload:function(){return e(this).each(function(){var t=e(this).data("wallpaper");if(t){T(t)}})}};t.onYouTubeIframeAPIReady=function(){u=true;for(var e in a){if(a.hasOwnProperty(e)){S(a[e].source,a[e].data)}}a=[]};e.fn.wallpaper=function(e){if(m[e]){return m[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return g.apply(this,arguments)}return this};e.wallpaper=function(e){if(e==="defaults"){m.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}})(jQuery,window)