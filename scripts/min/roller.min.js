!function(e,t){"use strict";function i(t){t=e.extend({},x,t);for(var i=e(this),r=0,n=i.length;n>r;r++)a(i.eq(r),t);return i}function a(i,a){if(!i.data("roller")){a=e.extend({},a,i.data("roller-options")),a.useMargin||$()||(a.useMargin=!0),a.single||(i.find(".roller-viewport").length||(i.wrapInner('<div class="roller-viewport"></div>'),a.viewport=!0),i.find(".roller-canister").length||(i.find(".roller-viewport").wrapInner('<div class="roller-canister"></div>'),a.canister=!0));var n="";a.controls&&!i.find(".roller-controls").length&&(n+='<div class="roller-controls">',n+='<span class="roller-control previous">'+a.labels.previous+"</span>",n+='<span class="roller-control next">'+a.labels.next+"</span>",n+="</div>"),a.pagination&&!i.find(".roller-pagination").length&&(n+='<div class="roller-pagination">',n+="</div>"),i.addClass("roller "+(a.single?"single ":"")+a.customClass).append(n);var o=e.extend({},{$roller:i,$viewport:i.find(".roller-viewport").eq(0),$canister:i.find(".roller-canister").eq(0),$captions:i.find(".roller-captions").eq(0),$controls:i.find(".roller-controls").eq(0),$pagination:i.find(".roller-pagination").eq(0),index:0,deltaX:null,deltaY:null,leftPosition:0,xStart:0,yStart:0,enabled:!1,touchstart:0,touchEnd:0,touchTimer:null,hasTouched:!1},a);if(o.$items=o.single?o.$roller.find(".roller-item"):o.$canister.find(".roller-item").not(".roller-item .roller-item"),o.$captionItems=o.$captions.find(".roller-caption"),o.$controlItems=o.$controls.find(".roller-control"),o.$paginationItems=o.$pagination.find(".roller-page"),o.$images=o.$canister.find("img"),o.totalImages=o.$images.length,i.data("roller",o),void 0!==t.matchMedia&&(o.maxWidth=1/0===o.maxWidth?"100000px":o.maxWidth,o.mediaQuery=t.matchMedia("(min-width:"+o.minWidth+") and (max-width:"+o.maxWidth+")"),o.mediaQuery.addListener(function(){f.apply(o.$roller)}),f.apply(o.$roller)),o.totalImages>0){o.loadedImages=0;for(var l=0;l<o.totalImages;l++){var c=o.$images.eq(l);c.one("load.roller",o,r),(c[0].complete||c[0].height)&&c.trigger("load.roller")}}(o.autoAdvance||o.auto)&&(o.autoTimer=h(o.autoTimer,o.autoTime,function(){s(o)},!0))}}function r(e){var t=e.data;t.loadedImages++,t.loadedImages===t.totalImages&&C.resize.apply(t.$roller)}function n(e){e.stopPropagation();var t=e.data;v(t.autoTimer),t.touchStart=(new Date).getTime(),t.$canister.css(g("transition","none"));var i="undefined"!=typeof e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:null;t.xStart=i?i.pageX:e.clientX,t.yStart=i?i.pageY:e.clientY,t.$canister.on("touchmove.roller",t,o).one("touchend.roller touchcancel.roller",t,l)}function o(e){e.stopPropagation();var t=e.data,i="undefined"!=typeof e.originalEvent.targetTouches?e.originalEvent.targetTouches[0]:null;t.deltaX=t.xStart-(i?i.pageX:e.clientX),t.deltaY=t.yStart-(i?i.pageY:e.clientY),(t.deltaX<-10||t.deltaX>10)&&e.preventDefault(),t.touchLeft=t.leftPosition-t.deltaX,t.touchLeft>0&&(t.touchLeft=0),t.touchLeft<t.maxMove&&(t.touchLeft=t.maxMove),t.$canister.css(t.useMargin?{marginLeft:t.touchLeft}:g("transform","translate3d("+t.touchLeft+"px, 0, 0)"))}function l(e){var t=e.data;t.touchEnd=(new Date).getTime(),t.leftPosition=t.touchLeft,t.$canister.css(g("transition","")),t.$canister.off("touchmove.roller touchend.roller touchcancel.roller");var i=t.deltaX>-10&&t.deltaX<10?t.index:p(t);t.touchPaged&&!t.swipe?u(t,i):(t.index=i,m(t)),t.deltaX=null,t.touchStart=0,t.touchEnd=0}function s(e){var t=e.index+1;t>e.pageCount&&(t=0),u(e,t)}function c(t){t.preventDefault(),t.stopPropagation();var i=t.data,a=i.index+(e(t.currentTarget).hasClass("next")?1:-1);i.hasTouched||(v(i.autoTimer),u(i,a)),"touchstart"===t.type&&(i.hasTouched=!0,i.touchTimer=h(i.touchTimer,500,function(){i.hasTouched=!1}))}function d(t){t.preventDefault(),t.stopPropagation();var i=t.data,a=i.$paginationItems.index(e(t.currentTarget));v(i.autoTimer),u(i,a)}function u(e,t,i){isNaN(t)&&(t=0),0>t&&(t=e.infinite?e.pageCount:0),t>e.pageCount&&(t=e.infinite?0:e.pageCount),e.single?e.$items.removeClass("active").eq(t).addClass("active"):(e.paged?e.items[t]&&(e.leftPosition=-e.items[t].position.left):e.pages[t]&&(e.leftPosition=-e.pages[t].left+e.extraMargin),e.leftPosition<e.maxMove&&(e.leftPosition=e.maxMove),e.leftPosition>0&&(e.leftPosition=0),isNaN(e.leftPosition)&&(e.leftPosition=0),e.useMargin?e.$canister.css({marginLeft:e.leftPosition}):i===!1?(e.$canister.css(g("transition","none")).css(g("transform","translate3d("+e.leftPosition+"px, 0, 0)")),e.resizeTimer=h(e.resizeTimer,5,function(){e.$canister.css(g("transition",""))},!1)):e.$canister.css(g("transform","translate3d("+e.leftPosition+"px, 0, 0)")),e.$items.removeClass("visible first"),e.paged?e.$items.eq(t).addClass("visible"):e.pages[t].$items.addClass("visible"),e.$items.filter(".visible").eq(0).addClass("first")),i!==!1&&t!==e.index&&(e.infinite||t>-1&&t<=e.pageCount)&&e.$roller.trigger("update.roller",[t]),e.index=t,m(e)}function m(e){e.$captionItems.filter(".active").removeClass("active"),e.$captionItems.eq(e.index).addClass("active"),e.$paginationItems.filter(".active").removeClass("active"),e.$paginationItems.eq(e.index).addClass("active"),e.infinite?e.$controlItems.addClass("enabled"):e.pageCount<1?e.$controlItems.removeClass("enabled"):(e.$controlItems.addClass("enabled"),e.index<=0?e.$controlItems.filter(".previous").removeClass("enabled"):(e.index>=e.pageCount||e.leftPosition===e.maxMove)&&e.$controlItems.filter(".next").removeClass("enabled"))}function f(){var t=e(this).data("roller");t.mediaQuery.matches?C.enable.apply(t.$roller):C.disable.apply(t.$roller)}function p(e){var t=0,i=0;if(e.single)return e.index;if((e.deltaX>20||e.deltaX<-20)&&e.touchStart&&e.touchEnd&&e.touchEnd-e.touchStart<200)return e.index+(e.deltaX>0?1:-1);if(e.paged){var a=1/0;if(e.leftPosition===e.maxMove)return e.items.length-1;var r,n,o;for(t=0;t<e.items.length;t++)r=e.items[t].$item,n=r.position(),o=n.left+e.leftPosition,0>o&&(o=-o),a>o&&(a=o,i=t);return i}if(0===e.leftPosition)return 0;var l;for(t=0;t<e.pages.length;t++)l=e.pages[t],-l.left<=e.leftPosition&&(i=t);return i}function g(e,t){var i={};return i["-webkit-"+e]=t,i["-moz-"+e]=t,i["-ms-"+e]=t,i["-o-"+e]=t,i[e]=t,i}function h(e,t,i,a){return v(e,a),a===!0?setInterval(i,t):setTimeout(i,t)}function v(e){null!==e&&(clearInterval(e),e=null)}function $(){var e,i=document.createElement("p"),a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(i,null);for(var r in a)void 0!==i.style[r]&&(i.style[r]="translate3d(1px,1px,1px)",e=t.getComputedStyle(i).getPropertyValue(a[r]));return document.body.removeChild(i),void 0!==e&&e.length>0&&"none"!==e}var x={autoAdvance:!1,autoTime:8e3,autoWidth:!1,controls:!0,customClass:"",extraMargin:0,infinite:!1,labels:{next:"",previous:""},maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,single:!1,touchPaged:!0,useMargin:!1},C={defaults:function(t){x=e.extend(x,t||{})},destroy:function(){return e(this).each(function(){var t=e(this).data("roller");t&&(v(t.autoTimer),t.single||(t.viewport&&t.$items.unwrap(),t.canister?t.$items.unwrap():t.$canister.attr("style",null)),t.autoWidth&&t.$items.css("width",""),t.$items.removeClass("visible first"),t.pagination&&t.$pagination.remove(),t.controls&&t.$controls.remove(),t.$roller.removeClass("roller enabled "+(t.single?"single ":"")+t.customClass).off(".roller").data("roller",null))})},disable:function(){return e(this).each(function(){var t=e(this).data("roller");t&&t.enabled&&(v(t.autoTimer),t.enabled=!1,t.$roller.removeClass("enabled").off("touchstart.roller click.roller"),t.$canister.attr("style","").css(g("transition","none")).off("touchstart.roller"),t.$controls.removeClass("visible"),t.$pagination.removeClass("visible").html(""),t.$canister.css(t.useMargin?{marginLeft:""}:g("transform","translate3d(0px, 0, 0)")),t.index=0)})},enable:function(){return e(this).each(function(){var t=e(this).data("roller");t&&!t.enabled&&(t.enabled=!0,t.$roller.addClass("enabled").on("touchstart.roller click.roller",".roller-control",t,c).on("touchstart.roller click.roller",".roller-page",t,d),t.$canister.css(g("transition","")),C.resize.apply(t.$roller),t.single||t.$canister.on("touchstart.roller",t,n))})},jump:function(t){return e(this).each(function(){var i=e(this).data("roller");i&&i.enabled&&(v(i.autoTimer),u(i,t-1))})},resize:function(){return e(this).each(function(){var t,i,a=e(this).data("roller");if(a&&a.enabled){if(a.count=a.$items.length,a.count<1)return;for(a.$roller.removeClass("animated"),a.$items.removeClass("visible first"),a.viewportWidth=a.$viewport.outerWidth(!1),a.autoWidth&&(a.paged=!0,a.$items.css({width:a.viewportWidth})),a.items=[],t=0;t<a.count;t++)i=a.$items.eq(t),a.items.push({$item:i,width:i.outerWidth(!0),position:i.position()});if(a.single)a.perPage=1,a.pageCount=a.count-1;else{for(a.canisterWidth=0,t=0;t<a.count;t++)a.canisterWidth+=a.items[t].width;if(a.paged)a.perPage=1,a.pageCount=a.canisterWidth>a.viewportWidth?a.count-1:0;else{a.perPage=1,a.pageCount=0,a.pages=[{left:0}];var r=a.extraMargin,n=r,o=0,l=0;for(t=0;t<a.count;t++)n+=a.items[t].width,n>a.viewportWidth&&(a.pages.push({left:r}),a.pages[a.pageCount].$items=a.$items.slice(o,l),a.pageCount++,n=a.extraMargin+a.items[t].width,o=t),l++,r+=a.items[t].width;a.pages[a.pageCount].$items=a.$items.slice(o,l)}}if(a.canisterWidth+=a.extraMargin,a.maxMove=a.single||a.paged?-a.canisterWidth+a.viewportWidth-a.extraMargin:-a.pages[a.pageCount].left,a.maxMove>=0&&(a.maxMove=0,a.pageCount=0),1/0!==a.pageCount){for(var s="",c=0;c<=a.pageCount;c++)s+='<span class="roller-page">'+(c+1)+"</span>";a.$pagination.html(s)}for(a.pageCount<1?(a.$controls.removeClass("visible"),a.$pagination.removeClass("visible")):(a.$controls.addClass("visible"),a.$pagination.addClass("visible")),a.$paginationItems=a.$roller.find(".roller-page"),a.single||a.$canister.css({width:a.canisterWidth}),t=0;t<a.count;t++)a.items[t].position=a.$items.eq(t).position();u(a,p(a),!1),a.resetTimer=h(a.resetTimer,5,function(){a.$roller.addClass("animated")},!1)}})},reset:function(){return e(this).each(function(){var t=e(this).data("roller");t&&t.enabled&&(t.$items=t.$roller.find(".roller-item"),C.resize.apply(t.$roller))})},set:function(t,i){return e(this).each(function(){var a=e(this).data("roller");a&&e.type(a[t])&&(a[t]=i)})}};e.fn.roller=function(e){return C[e]?C[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:i.apply(this,arguments)},e.roller=function(e){"defaults"===e&&C.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);